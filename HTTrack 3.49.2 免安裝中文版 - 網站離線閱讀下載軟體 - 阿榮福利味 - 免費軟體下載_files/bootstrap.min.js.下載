"use strict";if(typeof _pi_adbot_bootstrap==="undefined"||true){(function(){let ___pi_brain_base_url="https://brain.adbot.tw";let ___pi_learning_base_url="https://learning.adbot.tw";let ___pi_gene_base_url="https://gene.breaktime.com.tw";let _pi_adbot_bootstrap={config:{keywords:[],gene_keywords:[],jquery_url:___pi_brain_base_url+"/js/jquery.min.js",jscookie_url:___pi_brain_base_url+"/js/js.cookie.min.js",jsmd5_url:___pi_brain_base_url+"/js/md5.min.js",linejs_url:"https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js",breaktimejs_url:"https://a.breaktime.com.tw/js/au.js",breaktimejs_gene_url:___pi_gene_base_url+"/v1/adskeyword?url="+encodeURIComponent(window.location.href)+"&callback=_pi_adbot_bootstrap.init_gene_keywords",keywords_url:___pi_brain_base_url+"/ypakeywords.js",ip2location_url:___pi_brain_base_url+"/ypalocation.js",yonglin_app_url:___pi_brain_base_url+"/yonglin/app.js",pikwtest_url:___pi_learning_base_url+"/pi_keyword_testing.js",adbotkwtest_url:___pi_learning_base_url+"/adbot_keyword_testing.js",blockad_url:___pi_brain_base_url+"/js/blockad.min.js",bgif_url:___pi_learning_base_url+"/b.gif",ynapgif_url:___pi_learning_base_url+"/ynap.gif",ynapgif_delay_sec:5,y_syndication_url:"https://n.gemini.yahoo.com/ssi?ui=syndication&cc=STRM&ve=2&hs=1&pb=%7C%7C1197768208%7CSTRM%7C3d99dd02-48b3-4a9b-b3df-10ea5890c1b7&ri=3d99dd02-48b3-4a9b-b3df-10ea5890c1b7&sc=e2990fbb-5dfd-4184-b2a1-db5f5071ab0a&pu="+encodeURIComponent(window.location.href)+"&cb=_pi_adbot_bootstrap.parse_y_syndication_info",css:{bottomfloat_1:___pi_brain_base_url+"/css/pi-AD-InBottom-customerColor.min.css",bottomfloat:___pi_brain_base_url+"/css/pi-AD-InBottom.min.css",bottom:___pi_brain_base_url+"/css/pi-AD-wzNav.min.css",slide:___pi_brain_base_url+"/css/pi-mobile-Ad.min.css",desktop:___pi_brain_base_url+"/css/ppiiad-DTgeneral.min.css",native_m:___pi_brain_base_url+"/css/pi-MB-YAD-iframe.min.css",native_d:___pi_brain_base_url+"/css/pi-DT-YAD-iframe.min.css",line_btn:___pi_brain_base_url+"/css/lineAD.min.css"},js:{jsfunc_url:___pi_brain_base_url+"/js/func.min.js",jsdata_url:___pi_brain_base_url+"/js/data.min.js",jslineids_url:___pi_brain_base_url+"/js/lineads.min.js"},icon_url:"https://fonts.googleapis.com/icon?family=Material+Icons",analytics_url:"https://www.google-analytics.com/analytics.js",agent_url:___pi_learning_base_url+"/js/agent.min.js",pixcates_url:___pi_brain_base_url+"/js/pixcates.min.js",default_partner_config_url:___pi_brain_base_url+"/js/cfg/477b327bba97571ba8005c72c22a0b8f.min.js",load_js_defaults:{dataType:"script",scriptCharset:"UTF-8",timeout:3000},_ad_is_live:false,_ad_is_shown:false,trigger_sponsored_text:"更多 |",ip2location_enabled:true,force_use_y_pa:false,force_use_y_list:false,ga_sample_rate:10,pv_sample_rate:50,organism_keyword_shown:false,organism_keyword_probability:100,footprint_keyword_shown:false,footprint_keyword_probability:100,gene_keyword_shown:false,gene_keyword_probability:100,_pv_ad_counter:999,passback_percent:25},configure:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("configuring...");if(window.jQueryPi.isArray(_pi_adbot_bootstrap.config.gene_keywords)&&_pi_adbot_bootstrap.config.gene_keywords.length>0){_pi_adbot_bootstrap.config.gene_keyword_shown=true;_pi_adbot_bootstrap.config.keywords=_pi_adbot_bootstrap.config.gene_keywords;_pi_adbot_bootstrap.config.force_use_y_pa=true}else{if(typeof _adbot_keywords!=="undefined"&&window.jQueryPi.isArray(_adbot_keywords)&&_adbot_keywords.length>0){_pi_adbot_bootstrap.config.keywords=_adbot_keywords}else{if(typeof __lat_fp_kws!=="undefined"&&window.jQueryPi.isArray(__lat_fp_kws)&&__lat_fp_kws.length>0&&_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.footprint_keyword_probability){_pi_adbot_bootstrap.config.footprint_keyword_shown=true;_pi_adbot_bootstrap.config.keywords=__lat_fp_kws;_pi_adbot_bootstrap.config.force_use_y_pa=true}else{if(typeof _adbot_organism_keywords!=="undefined"&&window.jQueryPi.isArray(_adbot_organism_keywords)&&_adbot_organism_keywords.length>0&&_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.organism_keyword_probability){_pi_adbot_bootstrap.config.organism_keyword_shown=true;_pi_adbot_bootstrap.shuffle(_adbot_organism_keywords);_pi_adbot_bootstrap.config.keywords=_adbot_organism_keywords}}}}_pi_adbot_bootstrap.config.keywords=_pi_adbot_bootstrap.config.keywords.concat(_adbot_backup_keywords);if(_pi_adbot_bootstrap.isMobile()){if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_bootstrap.debugMode()&&console.debug("f2u");_adbot_slots=["native"]}if(typeof _adbot_slots!=="undefined"&&window.jQueryPi.isArray(_adbot_slots)){_adbot_slots.forEach(function(_slot_type){switch(_slot_type){case"slide":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+_slot_type+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.slide);break;case"bottom":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+_slot_type+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottom);break;case"bottomfloat":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+_slot_type+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottomfloat);break;case"bottomfloat_1":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+_slot_type+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottomfloat_1);break;case"native":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+_slot_type+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.native_m);break;case"linebtn":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+_slot_type+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.line_btn);break;default:_pi_adbot_bootstrap.debugMode()&&console.debug("no slot matched["+_slot_type+"]");break}})}}else{if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css[desktop native]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.native_d)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css[desktop]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.desktop)}}if(typeof _adbot_color!=="undefined"&&typeof _adbot_color==="string"&&/#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/.test(_adbot_color)){let _color_css=".pi-ad-customize-color { color: "+_adbot_color+"!important }.pi-ad-customize-bg { background-color: "+_adbot_color+"!important }.pi-ad-customize-rbga-bg { background: rgba("+_pi_adbot_bootstrap.hexToRgb(_adbot_color).r+","+_pi_adbot_bootstrap.hexToRgb(_adbot_color).g+","+_pi_adbot_bootstrap.hexToRgb(_adbot_color).b+",0.8)!important  };";let body=document.body||document.getElementsByTagName("body")[0],style=document.createElement("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=_color_css}else{style.appendChild(document.createTextNode(_color_css))}body.appendChild(style)}if(_pi_adbot_bootstrap.isWeekend()){_adbot_partner_config.propeller.enabled_hour_start=_adbot_partner_config.propeller.weekend_enabled_hour_start;_adbot_partner_config.propeller.enabled_hour_end=_adbot_partner_config.propeller.weekend_enabled_hour_end;_adbot_partner_config.propeller.normaltime_ratio=_adbot_partner_config.propeller.weekend_normaltime_ratio;_adbot_partner_config.propeller.normaltime_se_ratio=_adbot_partner_config.propeller.weekend_normaltime_se_ratio;_adbot_partner_config.propeller.normaltime_fb_ratio=_adbot_partner_config.propeller.weekend_normaltime_fb_ratio;_adbot_partner_config.propeller.hottime_ratio=_adbot_partner_config.propeller.weekend_hottime_ratio;_adbot_partner_config.propeller.hottime_se_ratio=_adbot_partner_config.propeller.weekend_hottime_se_ratio;_adbot_partner_config.propeller.hottime_fb_ratio=_adbot_partner_config.propeller.weekend_hottime_fb_ratio;_adbot_partner_config.propeller.d_normaltime_ratio=_adbot_partner_config.propeller.d_weekend_normaltime_ratio;_adbot_partner_config.propeller.d_normaltime_se_ratio=_adbot_partner_config.propeller.d_weekend_normaltime_se_ratio;_adbot_partner_config.propeller.d_normaltime_fb_ratio=_adbot_partner_config.propeller.d_weekend_normaltime_fb_ratio;_adbot_partner_config.propeller.d_hottime_ratio=_adbot_partner_config.propeller.d_weekend_hottime_ratio;_adbot_partner_config.propeller.d_hottime_se_ratio=_adbot_partner_config.propeller.d_weekend_hottime_se_ratio;_adbot_partner_config.propeller.d_hottime_fb_ratio=_adbot_partner_config.propeller.d_weekend_hottime_fb_ratio}if(typeof _adbot_ext_propeller!=="undefined"){_pi_adbot_bootstrap.debugMode()&&console.debug("_adbot_ext_propeller");_pi_adbot_bootstrap.debugMode()&&console.debug(_adbot_ext_propeller);for(let key in _adbot_ext_propeller){if(_adbot_ext_propeller.hasOwnProperty(key)){_adbot_partner_config.propeller[key]=_adbot_ext_propeller[key]}}}if(typeof _adbot_ip2location!=="undefined"){_pi_adbot_bootstrap.debugMode()&&console.debug("ip2location ip["+_adbot_ip2location.ip.toString()+"]");_pi_adbot_bootstrap.debugMode()&&console.debug("ip2location country["+_adbot_ip2location.country.toString()+"]");_pi_adbot_bootstrap.debugMode()&&console.debug("ip2location city["+_adbot_ip2location.city.toString()+"]");switch(_adbot_ip2location.country){case"us":_adbot_partner_config.propeller.enabled=false;_pi_adbot_bootstrap.config.force_use_y_list=true;_pi_adbot_bootstrap.debugMode()&&console.debug("Force use Yaooo list ad");break;case"hk":_adbot_partner_config.propeller.enabled=false;_pi_adbot_bootstrap.config.force_use_y_list=true;_pi_adbot_bootstrap.debugMode()&&console.debug("Force use Yaooo list ad");break;case"tw":let _adbot_ip2location_skip_city=["taipei","banqiao","taoyuan"];if(_adbot_ip2location_skip_city.indexOf(_adbot_ip2location.city)!=-1){_adbot_partner_config.propeller.enabled=false;_pi_adbot_bootstrap.config.trigger_sponsored_text="[贊助]";if(!this.isHotTime()){_pi_adbot_bootstrap.config.force_use_y_list=true;_pi_adbot_bootstrap.debugMode()&&console.debug("Force use Yaooo list ad")}}break}}if(typeof _adbot_partner_config.force_use_y_list!=="undefined"&&_adbot_partner_config.force_use_y_list){_pi_adbot_bootstrap.debugMode()&&console.debug("force_use_y_list");_pi_adbot_bootstrap.config.force_use_y_list=_adbot_partner_config.force_use_y_list}_pi_adbot_bootstrap.debugMode()&&console.debug("configured")},init:function(){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.devMode()&&_pi_adbot_bootstrap.showLog("devMode");_pi_adbot_bootstrap.debugMode()&&console.debug(_pi_adbot_bootstrap.isMobile()?"Mobile":"Dekstop");if(typeof _adbot_partner_id!=="undefined"&&typeof _adbot_partner_id==="string"){let _adbot_partner_config_url=___pi_brain_base_url+"/js/cfg/"+_adbot_partner_id+".min.js";_pi_adbot_bootstrap.loadjQuery(function(){_pi_adbot_bootstrap.loadPartnerConfig(_adbot_partner_config_url,function(){_pi_adbot_bootstrap.loadSiteConfig(function(){if(_pi_adbot_bootstrap.config.ip2location_enabled){_pi_adbot_bootstrap.debugMode()&&console.debug("Js extend ip2loation");_pi_adbot_bootstrap.loadJsExtension(_pi_adbot_bootstrap.config.ip2location_url)}_pi_adbot_bootstrap.loadIcon();_pi_adbot_bootstrap.loadJs(function(){let _lat_fp_kws_url=___pi_learning_base_url+"/latfpkws.js?h="+pimd5(window.location.href).toString();_pi_adbot_bootstrap.loadLatFpKwsJs(_lat_fp_kws_url,function(){_pi_adbot_bootstrap.configure();_pi_adbot_bootstrap.pvTracking();let adbot_disable=document.querySelector(".disable-adbot");if(adbot_disable!=null){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable AD by HTML Element")}else{if(typeof _adbot_partner_config.noad!=="undefined"&&_adbot_partner_config.noad){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable AD by Customer Config")}else{if(typeof _adbot_partner_config.disable_desktop_ad!=="undefined"&&_adbot_partner_config.disable_desktop_ad&&!_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable Desktop AD by Customer Config")}else{if(typeof _adbot_partner_config.disable_mobile_ad!=="undefined"&&_adbot_partner_config.disable_mobile_ad&&_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable Mobile AD by Customer Config")}else{if(typeof _adbot_partner_config.blockad!=="undefined"&&_adbot_partner_config.blockad){_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.blockad_url)}_pi_adbot_bootstrap.drawView();if(_adbot_partner_config.propeller.enabled){_pi_adbot_bootstrap.improveAD()}if(typeof _adbot_partner_config.pvad!=="undefined"&&_adbot_partner_config.pvad.enabled){_pi_adbot_bootstrap.pv_ad_launcher()}if(typeof _adbot_passback_function!=="undefined"&&_adbot_passback_function.length>0){_pi_adbot_bootstrap.passback_launcher(_adbot_passback_function)}}}}}_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.agent_url);if(!/zi\.media/.test(window.location.host)){_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.breaktimejs_url);setTimeout(function(){if(typeof window.pbfp!=="undefined"&&typeof window.pbfp.profile==="function"){_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.y_syndication_url)}},1000)}if(typeof _adbot_ip2location.country!=="undefined"&&_adbot_ip2location.country=="tw"){_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.adbotkwtest_url)}})})})})})}else{_pi_adbot_bootstrap.showLog("無法偵測到您的 ADBot Partner ID")}},drawView:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("Draw view");if(_pi_adbot_bootstrap.isMobile()){if(window.jQueryPi.isArray(_adbot_slots)){_adbot_slots.sort().reverse();_adbot_slots.forEach(function(_slot_type){switch(_slot_type){case"linebtn":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+_slot_type+"]");if(typeof _pi_adbot_lineads!=="undefined"&&window.jQueryPi.isArray(_pi_adbot_lineads)&&_pi_adbot_lineads.length>0){let _rand_line_ad=_pi_adbot_lineads[Math.floor(Math.random()*_pi_adbot_lineads.length)];let _line_id=_rand_line_ad.line_id;let _line_ad_text_idx=Math.floor(Math.random()*_rand_line_ad.ad_texts.length);let _line_ad_text=_rand_line_ad.ad_texts[_line_ad_text_idx];let _line_tracking_id=_line_id+"-"+(_line_ad_text_idx+1);_pi_adbot_func.init_line_button(_line_id,_line_ad_text,_line_tracking_id)}break;case"native":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+_slot_type+"]");_pi_adbot_func.init_mobile_native_ad();setTimeout(function(){_pi_adbot_bootstrap.ynap_gif(_adbot_partner_id)},_pi_adbot_bootstrap.config.ynapgif_delay_sec*1000);break;case"bottomfloat":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+_slot_type+"]");_pi_adbot_func.init_mobile_bottomfloat_trigger();break;case"bottomfloat_1":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+_slot_type+"]");_pi_adbot_func.init_mobile_bottomfloat_1_trigger();break;case"bottom":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+_slot_type+"]");_pi_adbot_func.init_mobile_bottom_trigger();break;case"slide":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+_slot_type+"]");_pi_adbot_func.init_mobile_slide_trigger();break;default:_pi_adbot_bootstrap.debugMode()&&console.debug("no slot matched["+_slot_type+"]");break}})}}else{if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_func.init_desktop_native_ad();setTimeout(function(){_pi_adbot_bootstrap.ynap_gif(_adbot_partner_id)},_pi_adbot_bootstrap.config.ynapgif_delay_sec*1000)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("draw view[desktop]");_pi_adbot_func.init_desktop_trigger()}}if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_bootstrap.debugMode()&&console.debug("do not bind trigger")}else{_pi_adbot_func.bind_trigger()}},loadCss:function(_css_url){let link=document.createElement("link");link.setAttribute("rel","stylesheet");link.setAttribute("type","text/css");link.setAttribute("href",_css_url);document.getElementsByTagName("head")[0].appendChild(link)},loadIcon:function(){let link=document.createElement("link");link.setAttribute("rel","stylesheet");link.setAttribute("type","text/css");link.setAttribute("href",this.config.icon_url);document.getElementsByTagName("head")[0].appendChild(link)},loadJs:function(_callback){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs start");let libraries=[_pi_adbot_bootstrap.config.breaktimejs_gene_url,_pi_adbot_bootstrap.config.keywords_url,_pi_adbot_bootstrap.config.jscookie_url,_pi_adbot_bootstrap.config.jsmd5_url,_pi_adbot_bootstrap.config.js.jsdata_url,_pi_adbot_bootstrap.config.js.jsfunc_url,_pi_adbot_bootstrap.config.js.jslineids_url];let deferreds=window.jQueryPi.map(libraries,function(current){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs "+current);let ajaxOptions=window.jQueryPi.extend({url:current},_pi_adbot_bootstrap.config.load_js_defaults);return window.jQueryPi.ajax(ajaxOptions)});window.jQueryPi.when.apply(window.jQueryPi,deferreds).then(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs done");_callback()},function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs failed");_callback()},function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs progress")})},loadJsExtension:function(_js_extension_url){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension start "+_js_extension_url);let script=document.createElement("script");script.type="text/javascript";script.src=_js_extension_url;script.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(script);if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension loaded "+_js_extension_url)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension error "+_js_extension_url)}}}else{script.onload=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension loaded "+_js_extension_url)};script.onerror=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension error "+_js_extension_url)}}},loadFont:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadFont start");if(typeof WebFont!=="undefined"){WebFont.load({google:{families:this.config.googlefontfamilies}});_pi_adbot_bootstrap.debugMode()&&console.debug("loadFont done")}},loadPartnerConfig:function(_partner_config_url,_partner_config_loaded_callback){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig start "+_partner_config_url);let script=document.createElement("script");script.type="text/javascript";script.src=_partner_config_url;script.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(script);if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig loaded");_pi_adbot_bootstrap.checkPartnerConfigReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig done");_partner_config_loaded_callback()})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig error, load default partner config");_pi_adbot_bootstrap.showLog("啊… 您的 ADBot Partner ID 或許有什麼誤會… ("+_adbot_partner_id+")");_pi_adbot_bootstrap.loadPartnerConfig(_pi_adbot_bootstrap.config.default_partner_config_url,_partner_config_loaded_callback)}}}else{script.onload=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig loaded");_pi_adbot_bootstrap.checkPartnerConfigReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig done");_partner_config_loaded_callback()})};script.onerror=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig error, load default partner config");_pi_adbot_bootstrap.showLog("啊… 您的 ADBot Partner ID 或許有什麼誤會… ("+_adbot_partner_id+")");_pi_adbot_bootstrap.loadPartnerConfig(_pi_adbot_bootstrap.config.default_partner_config_url,_partner_config_loaded_callback)}}},checkPartnerConfigReady:function(_callback){if(typeof _adbot_partner_config!=="undefined"){_callback()}else{window.setTimeout(function(){_pi_adbot_bootstrap.checkPartnerConfigReady(_callback)},50)}},loadLatFpKwsJs:function(_lat_fp_kws_url,_lat_fp_kws_js_loaded_callback){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs start "+_lat_fp_kws_url);let script=document.createElement("script");script.type="text/javascript";script.src=_lat_fp_kws_url;script.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(script);if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs loaded");_pi_adbot_bootstrap.checkLatFpKwsJsReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs done");_lat_fp_kws_js_loaded_callback()})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs error, load default partner config");_lat_fp_kws_js_loaded_callback()}}}else{script.onload=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs loaded");_pi_adbot_bootstrap.checkLatFpKwsJsReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs done");_lat_fp_kws_js_loaded_callback()})};script.onerror=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs error, load default partner config");_lat_fp_kws_js_loaded_callback()}}},checkLatFpKwsJsReady:function(_callback){if(typeof __lat_fp_kws!=="undefined"){_callback()}else{window.setTimeout(function(){_pi_adbot_bootstrap.checkLatFpKwsJsReady(_callback)},50)}},loadjQuery:function(_jquery_loaded_callback){if(!window.jQueryPi){_pi_adbot_bootstrap.debugMode()&&console.debug("no jQuery...");let script=document.createElement("script");script.type="text/javascript";script.src=this.config.jquery_url;script.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(script);if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;window.jQueryPi=window.jQuery.noConflict(true)}}}else{script.onload=function(){window.jQueryPi=window.jQuery.noConflict(true)}}}this.checkjQueryReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("jQuery loaded");_jquery_loaded_callback()})},checkjQueryReady:function(_callback){if(window.jQueryPi){_callback()}else{window.setTimeout(function(){_pi_adbot_bootstrap.checkjQueryReady(_callback)},50)}},loadAsyncJs:function(_js_url){_pi_adbot_bootstrap.debugMode()&&console.debug("load async js "+_js_url);let script=document.createElement("script");script.type="text/javascript";script.src=_js_url;script.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(script)},pvTracking:function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;if(typeof __gaTracker!=="undefined"){__gaTracker(function(){window.ga=__gaTracker})}ga("create",_adbot_partner_config.ga_resource,"auto",{name:"_pi_adbot"});if(_adbot_partner_config.ga_resource=="UA-89480192-1"){ga("_pi_adbot.send","pageview",{page:window.location.hostname+window.location.pathname})}else{if(typeof _adbot_partner_config.ga_sample_rate!=="undefined"){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_adbot_partner_config.ga_sample_rate){ga("_pi_adbot.send","pageview")}}else{ga("_pi_adbot.send","pageview")}if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.ga_sample_rate){ga("create","UA-89480192-1","auto",{name:"_pi_adbot_default"});if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","pageview",{page:window.location.hostname+window.location.pathname})}if(_pi_adbot_bootstrap.config.footprint_keyword_shown){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","event","footprint_keyword_shown","shown","重定向關鍵字",1)}}if(_pi_adbot_bootstrap.config.organism_keyword_shown){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","event","organism_keyword_shown","shown","重定向關鍵字",1)}}if(_pi_adbot_bootstrap.config.gene_keyword_shown){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","event","gene_keyword_shown","shown","重定向關鍵字",1)}}}}if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&_pi_adbot_bootstrap.isMobile()){ga("create","UA-97981201-1","auto",{name:"breaktime_line_it_btn"});ga("breaktime_line_it_btn.send","pageview",{page:window.location.hostname+window.location.pathname})}if(!(window.ga&&ga.create)){_pi_adbot_bootstrap.debugMode()&&console.debug("no ga load ga");window.jQueryPi.getScript(this.config.analytics_url,function(){})}_pi_adbot_bootstrap.debugMode()&&console.debug("ga pageview")},adTracking:function(_event_id,_event_action,_event_name){if(typeof ga!=="undefined"){ga("_pi_adbot.send","event",_event_id,_event_action,_event_name,1);if(_adbot_partner_config.ga_resource!="UA-89480192-1"){ga("_pi_adbot_default.send","event",_event_id,_event_action,_event_name,1)}if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&_pi_adbot_bootstrap.isMobile()){ga("breaktime_line_it_btn.send","event",_event_id,_event_action,_event_name,1)}_pi_adbot_bootstrap.debugMode()&&console.debug("ga event ("+_event_id+","+_event_action+","+_event_name+")")}else{_pi_adbot_bootstrap.debugMode()&&console.debug("No ga")}},debug:function(flag){if(typeof localStorage!=="undefined"){flag?localStorage.setItem("__pi_adbot_debug__",true):localStorage.removeItem("__pi_adbot_debug__")}else{alert("No localStorage supported")}},debugMode:function(){try{if(typeof localStorage!=="undefined"){return localStorage.getItem("__pi_adbot_debug__")!==null}}catch(exception){return false}return false},dev:function(flag){if(typeof localStorage!=="undefined"){flag?localStorage.setItem("__pi_adbot_dev__",true):localStorage.removeItem("__pi_adbot_dev__")}else{alert("No localStorage supported")}},devMode:function(){try{if(typeof localStorage!=="undefined"){return localStorage.getItem("__pi_adbot_dev__")!==null}}catch(exception){return false}return false},inIframe:function(){try{return window.self!==window.top}catch(e){return true}return false},hexToRgb:function(hex){let shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b});let result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null},shuffle:function(a){let j,x,i;for(i=a.length;i;i--){j=Math.floor(Math.random()*i);x=a[i-1];a[i-1]=a[j];a[j]=x}},getRandomInt:function(min,max){return Math.floor(Math.random()*(max-min+1))+min},isMobile:function(){return(/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent))},isSiteRdr:function(){return(document.referrer!==undefined)&&(typeof _adbot_partner_config.rdr!=="undefined"&&_adbot_partner_config.rdr.length>0)&&new RegExp("^https?://w{0,3}.?([w.]+)?"+_adbot_partner_config.rdr,"i").test(document.referrer)},isFromSE:function(){return(document.referrer!==undefined)&&/^https?:\/\/w{0,3}\.?([\w.]+)?google|^https?:\/\/w{0,3}\.?([\w.]+)?yahoo|^https?:\/\/w{0,3}\.?([\w.]+)?baidu|^https?:\/\/w{0,3}\.?([\w.]+)?sogou|^https?:\/\/w{0,3}\.?([\w.]+)?yandex|^https?:\/\/w{0,3}\.?([\w.]+)?bing|^https?:\/\/w{0,3}\.?([\w.]+)?360|^https?:\/\/piliapp-mapping/i.test(document.referrer)},isFromFB:function(){return(document.referrer!==undefined)&&/^https?:\/\/w{0,3}\.?([\w.]+)?facebook/i.test(document.referrer)},isHotTime:function(){let _hour=new Date().getHours();if(_adbot_partner_config.propeller.enabled_hour_start>_adbot_partner_config.propeller.enabled_hour_end){return(_hour>=_adbot_partner_config.propeller.enabled_hour_start&&_hour<24)||(_hour>=0&&_hour<_adbot_partner_config.propeller.enabled_hour_end)}else{return(_hour>=_adbot_partner_config.propeller.enabled_hour_start&&_hour<_adbot_partner_config.propeller.enabled_hour_end)}},isWeekend:function(){let d=new Date();let n=d.getDay();return(n==0||n==6)},improveAD:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("improve AD");if(_pi_adbot_bootstrap.isWeekend()){_pi_adbot_bootstrap.debugMode()&&console.debug("isWeekend")}if(this.isHotTime()){if(_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&console.debug("Mobile");_pi_adbot_bootstrap.debugMode()&&console.debug("Hot time start hour: "+_adbot_partner_config.propeller.enabled_hour_start+", end hour: "+_adbot_partner_config.propeller.enabled_hour_end);let _improve_threshold=_adbot_partner_config.propeller.hottime_ratio;if(this.isFromSE()||this.isSiteRdr()){_pi_adbot_bootstrap.debugMode()&&console.debug("From SE");_improve_threshold=_adbot_partner_config.propeller.hottime_se_ratio}if(this.isFromFB()){_pi_adbot_bootstrap.debugMode()&&console.debug("From FB");_improve_threshold=_adbot_partner_config.propeller.hottime_fb_ratio}_pi_adbot_bootstrap.debugMode()&&console.debug("improve threshold "+_improve_threshold);let _rand_int=this.getRandomInt(1,100);_pi_adbot_bootstrap.debugMode()&&console.debug("_rand_int="+_rand_int.toString());if(_rand_int<=_improve_threshold&&window.Cookies.get("pi_adbot_fac")===undefined){_pi_adbot_bootstrap.debugMode()&&console.debug("AD improved");setTimeout(function(){if(window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").length>0){window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").click()}else{window.jQueryPi(".__pi_adbot_trigger:first").click()}},50);_pi_adbot_bootstrap.debugMode()&&console.debug("fuzzy auto click");window.Cookies.set("pi_adbot_fac",true,{expires:_adbot_partner_config.propeller.fac_expire})}}else{_pi_adbot_bootstrap.debugMode()&&console.debug("Desktop");_pi_adbot_bootstrap.debugMode()&&console.debug("Hot time start hour: "+_adbot_partner_config.propeller.enabled_hour_start+", end hour: "+_adbot_partner_config.propeller.enabled_hour_end);let _improve_threshold=_adbot_partner_config.propeller.d_hottime_ratio;if(this.isFromSE()||this.isSiteRdr()){_pi_adbot_bootstrap.debugMode()&&console.debug("From SE");_improve_threshold=_adbot_partner_config.propeller.d_hottime_se_ratio}if(this.isFromFB()){_pi_adbot_bootstrap.debugMode()&&console.debug("From FB");_improve_threshold=_adbot_partner_config.propeller.d_hottime_fb_ratio}_pi_adbot_bootstrap.debugMode()&&console.debug("improve threshold "+_improve_threshold);let _rand_int=this.getRandomInt(1,100);_pi_adbot_bootstrap.debugMode()&&console.debug("_rand_int="+_rand_int.toString());if(_rand_int<=_improve_threshold&&window.Cookies.get("pi_adbot_fac")===undefined){_pi_adbot_bootstrap.debugMode()&&console.debug("AD improved");setTimeout(function(){if(window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").length>0){window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").click()}else{window.jQueryPi(".__pi_adbot_trigger:first").click()}},50);_pi_adbot_bootstrap.debugMode()&&console.debug("fuzzy auto click");window.Cookies.set("pi_adbot_fac",true,{expires:_adbot_partner_config.propeller.fac_expire})}}}else{if(_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&console.debug("Mobile");_pi_adbot_bootstrap.debugMode()&&console.debug("Normal time");let _improve_threshold=_adbot_partner_config.propeller.normaltime_ratio;if(this.isFromSE()||this.isSiteRdr()){_pi_adbot_bootstrap.debugMode()&&console.debug("From SE");_improve_threshold=_adbot_partner_config.propeller.normaltime_se_ratio}if(this.isFromFB()){_pi_adbot_bootstrap.debugMode()&&console.debug("From FB");_improve_threshold=_adbot_partner_config.propeller.normaltime_fb_ratio}_pi_adbot_bootstrap.debugMode()&&console.debug("improve threshold "+_improve_threshold);let _rand_int=this.getRandomInt(1,100);_pi_adbot_bootstrap.debugMode()&&console.debug("_rand_int="+_rand_int.toString());if(_rand_int<=_improve_threshold&&window.Cookies.get("pi_adbot_fac")===undefined){_pi_adbot_bootstrap.debugMode()&&console.debug("AD improved");setTimeout(function(){if(window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").length>0){window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").click()}else{window.jQueryPi(".__pi_adbot_trigger:first").click()}},50);_pi_adbot_bootstrap.debugMode()&&console.debug("fuzzy auto click");window.Cookies.set("pi_adbot_fac",true,{expires:_adbot_partner_config.propeller.fac_expire})}}else{_pi_adbot_bootstrap.debugMode()&&console.debug("Desktop");_pi_adbot_bootstrap.debugMode()&&console.debug("Normal time");let _improve_threshold=_adbot_partner_config.propeller.d_normaltime_ratio;if(this.isFromSE()||this.isSiteRdr()){_pi_adbot_bootstrap.debugMode()&&console.debug("From SE");_improve_threshold=_adbot_partner_config.propeller.d_normaltime_se_ratio}if(this.isFromFB()){_pi_adbot_bootstrap.debugMode()&&console.debug("From FB");_improve_threshold=_adbot_partner_config.propeller.d_normaltime_fb_ratio}_pi_adbot_bootstrap.debugMode()&&console.debug("improve threshold "+_improve_threshold);let _rand_int=this.getRandomInt(1,100);_pi_adbot_bootstrap.debugMode()&&console.debug("_rand_int="+_rand_int.toString());if(_rand_int<=_improve_threshold&&window.Cookies.get("pi_adbot_fac")===undefined){_pi_adbot_bootstrap.debugMode()&&console.debug("AD improved");setTimeout(function(){if(window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").length>0){window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").click()}else{window.jQueryPi(".__pi_adbot_trigger:first").click()}},50);_pi_adbot_bootstrap.debugMode()&&console.debug("fuzzy auto click");window.Cookies.set("pi_adbot_fac",true,{expires:_adbot_partner_config.propeller.fac_expire})}}}},pv_ad_launcher:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("pv_ad_launcher");let _pv_ad_counter=999;if(window.Cookies.get("pi_adbot_pv_ad_counter")===undefined){_pv_ad_counter=_pi_adbot_bootstrap.isMobile()?_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.mobile_improve_start,_adbot_partner_config.pvad.mobile_improve_end):_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.desktop_improve_start,_adbot_partner_config.pvad.desktop_improve_end)}else{_pv_ad_counter=parseInt(window.Cookies.get("pi_adbot_pv_ad_counter"))-1}_pi_adbot_bootstrap.config._pv_ad_counter=_pv_ad_counter;window.Cookies.set("pi_adbot_pv_ad_counter",_pv_ad_counter,{expires:1});_pi_adbot_bootstrap.debugMode()&&console.debug("pi_adadbot_pv_ad_counter="+_pv_ad_counter);if(_pi_adbot_bootstrap.isPvAd()){if(!window.jQueryPi(".__pi_adbot_trigger:first").data("active")){_pi_adbot_bootstrap.debugMode()&&console.debug("pv ad fire");setTimeout(function(){window.jQueryPi(".__pi_adbot_trigger:first").click()},50);_pv_ad_counter=_pi_adbot_bootstrap.isMobile()?_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.mobile_improve_start,_adbot_partner_config.pvad.mobile_improve_end):_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.desktop_improve_start,_adbot_partner_config.pvad.desktop_improve_end);window.Cookies.set("pi_adbot_pv_ad_counter",_pv_ad_counter,{expires:1})}}},passback_launcher:function(passback_name){_pi_adbot_bootstrap.debugMode()&&console.debug("passback_launcher["+passback_name+"]");if(typeof eval(passback_name)==="function"){let passback_flag=false;let original_position=window.jQueryPi(window).scrollTop();let document_height=window.jQueryPi(document).height();let passback_trigger_percent=(typeof _adbot_passback_percent!=="undefined")?parseInt(_adbot_passback_percent):_pi_adbot_bootstrap.config.passback_percent;window.jQueryPi(window).scroll(function(){let current_position=window.jQueryPi(window).scrollTop();let current_position_percent=current_position/document_height*100;if(!passback_flag&&!_pi_adbot_bootstrap.config._ad_is_shown&&current_position_percent>passback_trigger_percent){_pi_adbot_bootstrap.debugMode()&&console.debug("passback_launcher["+passback_name+"] run as function");eval(passback_name+"()");passback_flag=true;window.jQueryPi(".__pi_adbot_trigger").remove()}})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("passback_launcher["+passback_name+"] is not a function")}},isPvAd:function(){return _pi_adbot_bootstrap.config._pv_ad_counter<=0},loadSiteConfig:function(_callback){_pi_adbot_bootstrap.debugMode()&&console.debug("loadSiteConfig start");let _sites=["pixnet.net"];let _current_site="";_sites.some(function(site){if(window.location.href.indexOf(site)!=-1){_current_site=site;return true}return false});_pi_adbot_bootstrap.debugMode()&&console.debug("current site["+_current_site+"]");let libraries=[];switch(_current_site){case"pixnet.net":libraries.push(_pi_adbot_bootstrap.config.pixcates_url);break}if(libraries.length>0){let deferreds=window.jQueryPi.map(libraries,function(current){let ajaxOptions=window.jQueryPi.extend({url:current},_pi_adbot_bootstrap.config.load_js_defaults);return window.jQueryPi.ajax(ajaxOptions)});window.jQueryPi.when.apply(window.jQueryPi,deferreds).then(function(){switch(_current_site){case"pixnet.net":_pi_adbot_bootstrap.config.keywords_url+="?cfg="+_pi_adbot_pix.get_keyword_cfg(_pi_adbot_pix.get_cate());break}_pi_adbot_bootstrap.debugMode()&&console.debug("loadSiteConfig done");_callback()})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadSiteConfig done");_callback()}},showLog:function(_log){window.console&&console.log("%c"+_log," text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em")},is_ylm:function(){return(_pi_adbot_bootstrap.config.force_use_y_list||(!_pi_adbot_bootstrap.isHotTime()&&(!_pi_adbot_bootstrap.config.force_use_y_pa&&(!_pi_adbot_bootstrap.isFromSE()&&!_pi_adbot_bootstrap.isSiteRdr()))))&&!_pi_adbot_bootstrap.isPvAd()&&!_pi_adbot_bootstrap.devMode()},getFormattedDate:function(today){let week=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");let day=week[today.getDay()];let dd=today.getDate();let mm=today.getMonth()+1;let yyyy=today.getFullYear();let hour=today.getHours();let minu=today.getMinutes();let tag_per_hours=4;let postfix_hour=Math.floor(hour/tag_per_hours)*tag_per_hours;if(dd<10){dd="0"+dd}if(mm<10){mm="0"+mm}if(minu<10){minu="0"+minu}if(postfix_hour<10){postfix_hour="0"+postfix_hour}return yyyy.toString()+mm.toString()+dd.toString()+postfix_hour.toString()},ad:function(_keyword,_type,_callback,__load_finished){_keyword=_keyword.toString();if(typeof _keyword!=="undefined"&&_keyword.length>0){__load_finished=typeof __load_finished==="function"?__load_finished:function(){};let _ymd=_pi_adbot_bootstrap.getFormattedDate(new Date());let _tt=encodeURIComponent(_keyword);let _ty=_type;let _cb=_callback;let _pi_adbot_domain="cell.adbot.tw";let _scriptUrl="https://"+_pi_adbot_domain+"/ypa?tt="+_tt+"&partner="+_adbot_partner_id+"&callback="+_cb;if(typeof _adbot_label!=="undefined"&&typeof _adbot_label==="string"&&_adbot_label.length>0){_scriptUrl+="&label="+_adbot_label+"_"+_ymd}else{_scriptUrl+="&label="+_ymd}window.jQueryPi.getScript(_scriptUrl,__load_finished)}},b_gif:function(_keyword,_title,_desc){_pi_adbot_bootstrap.debugMode()&&console.debug("create b gif");let _src=_pi_adbot_bootstrap.config.bgif_url+"?u="+encodeURIComponent(window.location.href)+"&k="+encodeURIComponent(_keyword)+"&t="+encodeURIComponent(_title)+"&d="+encodeURIComponent(_desc);_pi_adbot_bootstrap.debugMode()&&console.debug(_src);window.jQueryPi("body").append(window.jQueryPi("<img/>").attr("style","display:none;").attr("class","bat_img").attr("src",_src))},ynap_gif:function(_adbot_partner_id){_pi_adbot_bootstrap.debugMode()&&console.debug("create ynap gif");let _src=_pi_adbot_bootstrap.config.ynapgif_url+"?adbid="+_adbot_partner_id+"&fqdn="+encodeURIComponent(window.location.hostname)+"&href="+encodeURIComponent(window.location.href);_pi_adbot_bootstrap.debugMode()&&console.debug(_src);window.jQueryPi("body").append(window.jQueryPi("<img/>").attr("style","display:none;").attr("class","ynap_img").attr("src",_src))},parse_y_syndication_info:function(data){_pi_adbot_bootstrap.debugMode()&&console.debug("exec breaktime pbfp profile");window.pbfp.profile({userAge:data.userAge,userGender:data.userGender,userCountry:data.userCountry})},__pbfp_adsInfo:function(data){if(typeof window.pbfp==="object"&&typeof window.pbfp.adsInfo==="function"){if(typeof data.ads!=="undefined"&&typeof data.keyword!=="undefined"){_pi_adbot_bootstrap.debugMode()&&console.debug("exec breaktime pbfp adsInfo");window.pbfp.adsInfo({source:"ypa",config:"",type:"",keyword:data.keyword,ads:data.ads})}}else{_pi_adbot_bootstrap.debugMode()&&console.debug("wait breaktime pbfp adsInfo");setTimeout("_pi_adbot_bootstrap.__pbfp_adsInfo("+data+")",500)}},init_gene_keywords:function(rsp){if(rsp.status){if(rsp.data.length>0){rsp.data.forEach(function(gene){_pi_adbot_bootstrap.config.gene_keywords.push(gene.text)})}}},get_filtered_ad:function(_ads){let _filtered_ad=null;if(typeof _adbot_partner_config.ad_filter!=="undefined"){window.jQueryPi.each(_ads,function(){let _ad=this;let _match_flag=false;if(typeof _adbot_partner_config.ad_filter.sitehost!=="undefined"){window.jQueryPi.each(_adbot_partner_config.ad_filter.sitehost,function(){let _skip=this;let _re=new RegExp(_skip,"i");let _match=_re.exec(_ad.sitehost);if(_match!=null){_match_flag=true;return false}})}if(!_match_flag){_filtered_ad=_ad;return false}})}else{_filtered_ad=_ads[0]}return _filtered_ad}};window._pi_adbot_bootstrap=_pi_adbot_bootstrap;_pi_adbot_bootstrap.init()})()}else{_pi_adbot_bootstrap.debugMode()&&console.debug("[IGNORE] initailized...")};